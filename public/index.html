<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="robots" content="index, follow">
    <title>Секс рассказы 2025-2026 — читать онлайн бесплатно 18+ | sexnews.ru</title>
    <meta name="description" content="Самые горячие секс рассказы 2025-2026 года без регистрации: измена жены, групповой секс, первый анал, инцест, зоо, африканцы, куни, минет и сотни других тем. Бесплатно и анонимно!">
    <style>
        body{margin:0;padding:0;background:#fff;color:#222;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;line-height:1.8;font-size:18px}
        .wrapper{max-width:860px;margin:0 auto;padding:15px}
        h1{font-size:34px;margin:30px 0 20px;text-align:center;color:#c0392b;line-height:1.3}
        h2{font-size:26px;margin:45px 0 20px;text-align:center;color:#e74c3c}
        .intro{margin:35px 0 55px;text-align:center;font-size:19.5px;line-height:1.85;color:#222}
        .intro strong{color:#c0392b}
        .stories-grid{margin:40px 0}
        .stories-grid a{display:block;margin:15px 0;padding:18px 22px;background:#fafafa;border:1px solid #eee;border-radius:12px;text-decoration:none;color:#222;font-size:19.5px;transition:all .25s}
        .stories-grid a:hover{background:#fef5f5;border-color:#e74c3c;color:#c0392b}
        .loader,.fallback{text-align:center;margin:60px 0;font-size:19px;color:#999}
        .fallback a{color:#e74c3c;font-size:22px;text-decoration:underline}
        @media(max-width:768px){h1{font-size:28px}.intro{font-size:18px}.stories-grid a{font-size:18.5px;padding:16px 18px}}
    </style>
</head>
<body>
    <div class="wrapper">
        <h1>Секс рассказы 2025-2026 — читать онлайн бесплатно 18+</h1>
        <div class="intro">
            <p>Добро пожаловать на <strong>sexnews.ru</strong> — крупнейший русский архив <strong>секс рассказов</strong> и <strong>эротических историй</strong> 2025-2026 года!</p>
            <p>Тысячи горячих историй: <strong>измена жены</strong>, <strong>групповой секс</strong>, <strong>первый анал</strong>, <strong>инцест</strong>, <strong>зоо</strong>, <strong>куни</strong>, <strong>минеты</strong>, <strong>лесби</strong>, <strong>геи</strong>, <strong>африканцы</strong>, <strong>свингеры</strong>, <strong>БДСМ</strong> и сотни других тем.</p>
            <p>Всё бесплатно, без регистрации и смс. Обновления каждый день!</p>
        </div>

        <h2>Новые и самые читаемые секс рассказы прямо сейчас</h2>
        <div id="stories-container" class="stories-grid">
            <div class="loader">Загружаем горячие секс рассказы...</div>
        </div>

        <div style="text-align:center;margin:60px 0;">
            <a href="https://anonymedates.icu/H4CL9y" rel="nofollow noopener" target="_blank"
               style="display:inline-block;background:#e74c3c;color:#fff;padding:20px 50px;font-size:24px;border-radius:12px;text-decoration:none;font-weight:bold">
                Ещё больше секс рассказов 18+ →
            </a>
        </div>
    </div>

<script>
    const PER_PAGE = 40;
    let allUrls = [];

    // Точный обратный транслит (по твоему Python-алгоритму)
    function latinToCyrillic(str) {
        str = str.toLowerCase();
        const map = {
            'yo':'ё','zh':'ж','kh':'х','ts':'ц','ch':'ч','sh':'ш','sch':'щ','yu':'ю','ya':'я',
            'a':'а','b':'б','v':'в','g':'г','d':'д','e':'е','z':'з','i':'и','j':'й','k':'к',
            'l':'л','m':'м','n':'н','o':'о','p':'п','r':'р','s':'с','t':'т','u':'у','f':'ф','y':'ы','h':'х'
        };
        // Сначала длинные
        for (const key in map) if (key.length > 1) str = str.split(key).join(map[key]);
        // Потом одиночные + y → й везде (в твоём генераторе «й» → «y»)
        str = str.split('').map(c => map[c] || c).join('');
        return str.replace(/y/g, 'й'); // все оставшиеся y → й
    }

    function filenameToTitle(fn) {
        return fn.replace(/\.html$/i,'').split('-').map(w => {
            const c = latinToCyrillic(w);
            return c.charAt(0).toUpperCase() + c.slice(1);
        }).join(' ');
    }

    // Пробуем три пути — один точно сработает на Vercel
    const paths = ['/sitemap.xml', '/public/sitemap.xml', '/sitemap.xml?t=' + Date.now()];
    let tried = 0;

    function loadSitemap() {
        if (tried >= paths.length) {
            document.getElementById('stories-container').innerHTML = '<div class="fallback">Список временно недоступен<br><a href="/pages/">→ Полный архив здесь</a></div>';
            return;
        }
        console.log('Пробуем путь:', paths[tried]);
        fetch(paths[tried] + (paths[tried].includes('?') ? '' : '?t=' + Date.now()))
            .then(r => {
                if (!r.ok) throw new Error('Не 200');
                return r.text();
            })
            .then(text => {
                console.log('Sitemap загружен, размер:', text.length);
                const xml = new DOMParser().parseFromString(text, "text/xml");
                const locs = xml.querySelectorAll("loc");
                console.log('Найдено URL в sitemap:', locs.length);

                allUrls = Array.from(locs).map(loc => {
                    const url = loc.textContent.trim();
                    if (!url.endsWith('.html')) return null;
                    const fn = url.split('/').pop();
                    return {url: fn, title: filenameToTitle(fn) + ' — секс рассказ 18+'};
                }).filter(Boolean);

                console.log('Готовых ссылок:', allUrls.length);
                if (allUrls.length === 0) throw new Error('Нет .html');

                allUrls.sort(() => Math.random() - 0.5);
                showPage();
                setInterval(showPage, 60000);
            })
            .catch(err => {
                console.error('Ошибка с путем', paths[tried], err);
                tried++;
                loadSitemap();
            });
    }

    function showPage() {
        const container = document.getElementById('stories-container');
        const slice = allUrls.slice(0, PER_PAGE);
        const html = slice.map(i => `<a href="${i.url}">${i.title}</a>`).join('');
        container.style.opacity = '0';
        setTimeout(() => {
            container.innerHTML = html;
            container.style.opacity = '1';
        }, 300);
        allUrls.push(...allUrls.splice(0, PER_PAGE)); // крутим
    }

    loadSitemap();
</script>
</body>
</html>
